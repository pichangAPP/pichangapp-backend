# =====================================
# Rasa NLU + Core Configuration (Español)
# =====================================

recipe: default.v1
language: es
assistant_id: chato-bot

pipeline:
  # Tokenizador básico compatible con español
  - name: WhitespaceTokenizer

  # Características léxicas (prefijos, sufijos, etc.)
  - name: LexicalSyntacticFeaturizer

  # Bolsa de palabras para intenciones
  - name: CountVectorsFeaturizer

  # Características de caracteres (maneja errores tipográficos)
  - name: CountVectorsFeaturizer
    analyzer: char_wb
    min_ngram: 1
    max_ngram: 4

  # Clasificador multitarea para intenciones y entidades
  - name: DIETClassifier
    epochs: 100
    random_seed: 42
    constrain_similarities: true

  # Sinónimos (por ejemplo "sí" = "afirmativo")
  - name: EntitySynonymMapper

  # Extrae entidades basadas en regex si las defines en rules.yml
  - name: RegexEntityExtractor

  # Selección de respuestas para preguntas frecuentes
  - name: ResponseSelector
    epochs: 100

  # Maneja faltas de ortografía o confusiones menores
  - name: FallbackClassifier
    threshold: 0.3
    ambiguity_threshold: 0.1

policies:
  # Políticas de diálogo (aprende de tus stories)
  - name: MemoizationPolicy
  - name: RulePolicy
  - name: TEDPolicy
    max_history: 5
    epochs: 100
