# =====================================
# Rasa NLU + Core Configuration (EspaÃ±ol)
# =====================================

recipe: default.v1
language: es
assistant_id: chato-bot

pipeline:
  # Tokenizador bÃ¡sico compatible con espaÃ±ol
  - name: WhitespaceTokenizer

  # CaracterÃ­sticas lÃ©xicas (prefijos, sufijos, etc.)
  - name: LexicalSyntacticFeaturizer

  # Bolsa de palabras para intenciones
  - name: CountVectorsFeaturizer

  # CaracterÃ­sticas de caracteres (maneja errores tipogrÃ¡ficos)
  - name: CountVectorsFeaturizer
    analyzer: char_wb
    min_ngram: 1
    max_ngram: 4

  # Clasificador multitarea para intenciones y entidades
  - name: DIETClassifier
    epochs: 100
    random_seed: 42
    constrain_similarities: true # âœ… elimina warning y mejora separaciÃ³n de intenciones
    embedding_dimension: 128 # ğŸ”¹ mejora la representaciÃ³n semÃ¡ntica
    learning_rate: 0.001 # ğŸ”¹ evita sobreajuste en datasets pequeÃ±os

  # Mapea sinÃ³nimos comunes (ej: â€œsÃ­â€, â€œafirmativoâ€, â€œclaroâ€)
  - name: EntitySynonymMapper

  # Extrae entidades basadas en patrones regex (opcional)
  - name: RegexEntityExtractor

  # Selector de respuestas para FAQs
  - name: ResponseSelector
    epochs: 100
    constrain_similarities: true # ğŸ”¹ mejora precisiÃ³n en respuestas

  # Clasificador de fallback (respuestas por defecto)
  - name: FallbackClassifier
    threshold: 0.3
    ambiguity_threshold: 0.1

policies:
  # Memoriza ejemplos exactos vistos en entrenamiento
  - name: MemoizationPolicy

  # Reglas predefinidas (flows y forms)
  - name: RulePolicy
    enable_fallback_prediction: true
    restrict_rules: true # ğŸ”¹ asegura que no se sobreescriban reglas

  # PolÃ­tica neuronal de diÃ¡logo (entrena secuencias de conversaciÃ³n)
  - name: TEDPolicy
    max_history: 5
    epochs: 100
    constrain_similarities: true # âœ… para eliminar warning y mejorar consistencia
