version: "3.1"

# ===============================================
# INTENCIONES
# ===============================================
intents:
  # Intenciones bÃ¡sicas
  - greet
  - goodbye
  - affirm
  - deny
  - help

  # Intenciones principales del negocio
  - request_field_recommendation
  - request_admin_recommendation
  - request_admin_top_clients
  - request_admin_demand_alerts

  # Consultas informativas
  - ask_reservation_process
  - ask_modify_reservation
  - ask_cancellation_policy
  - ask_reprogram_reservation
  - ask_pricing_info
  - show_faqs

  # Funcionalidades de seguimiento
  - show_previous_recommendations
  - ask_feedback_status

  # Feedback del usuario
  - give_positive_feedback
  - give_negative_feedback

  # Intent para capturar informaciÃ³n del usuario
  - inform

  # Intent especial para setear slots
  - SetSlots

  # Intent de fallback
  - nlu_fallback

# ===============================================
# ENTIDADES
# ===============================================
entities:
  - sport
  - location
  - time
  - date
  - budget
  - surface
  - rating
  - amenities
  - num_players
  - field_size
  - urgency_level
  - recurrence

# ===============================================
# SLOTS - Almacenamiento de informaciÃ³n
# ===============================================
slots:
  # --- Slot para el rol del usuario ---
  user_role:
    type: categorical
    values:
      - player
      - admin
    influence_conversation: true
    mappings:
      - type: custom

  # --- Slots para recomendaciÃ³n de canchas ---
  sport:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: sport
      - type: from_intent
        intent: inform
        value: last_entity_value

  location:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: location
      - type: from_intent
        intent: inform
        value: last_entity_value

  time:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: time
      - type: from_intent
        intent: inform
        value: last_entity_value

  date:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: date
      - type: from_intent
        intent: inform
        value: last_entity_value

  budget:
    type: float
    min_value: 0
    max_value: 1000
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: budget
      - type: from_intent
        intent: inform
        value: last_entity_value

  surface:
    type: categorical
    values:
      - Grass mixto (natural + sintÃ©tico)
      - Grass sintÃ©tico
      - Grass sintÃ©tico premium
      - Grass natural
      - Losa de cemento
      - Losa deportiva
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: surface

  rating:
    type: float
    min_value: 0
    max_value: 5
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: rating

  num_players:
    type: float
    min_value: 2
    max_value: 22
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: num_players

  field_size:
    type: categorical
    values:
      - pequeÃ±a
      - mediana
      - grande
      - completa
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: field_size

  urgency_level:
    type: categorical
    values:
      - urgente
      - normal
      - flexible
    influence_conversation: true
    mappings:
      - type: custom

  # --- Slots de control de conversaciÃ³n ---
  requested_slot:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para guardar recomendaciones previas
  last_recommendations:
    type: any
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para nombre del usuario
  user_name:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para ID del usuario
  user_id:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para preferencias guardadas
  user_preferences:
    type: any
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para historial de feedback
  feedback_history:
    type: any
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para contador de interacciones
  interaction_count:
    type: float
    min_value: 0
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para indicar si es usuario recurrente
  is_returning_user:
    type: bool
    influence_conversation: true
    mappings:
      - type: custom

  # Slot para amenidades requeridas
  amenities:
    type: list
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: amenities

  # Slot para tracking de formulario abandonado
  form_abandoned:
    type: bool
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para contexto de Ãºltima acciÃ³n
  last_action_context:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para indicar si mostrÃ³ precios
  showed_pricing:
    type: bool
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para seguimiento de FAQs vistas
  faqs_viewed:
    type: list
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para idioma preferido (futuro)
  preferred_language:
    type: categorical
    values:
      - es
      - en
    influence_conversation: false
    mappings:
      - type: custom

  # Slot para tema del chat
  chat_theme:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  # Slot para id de sesiÃ³n del chatbot
  chatbot_session_id:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  # Slots para preferencias inferidas de recomendaciÃ³n
  preferred_location:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  preferred_surface:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  preferred_sport:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  preferred_date:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  preferred_start_time:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  preferred_end_time:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  preferred_budget:
    type: float
    influence_conversation: true
    mappings:
      - type: custom

# ===============================================
# FORMS - Formularios para recopilar informaciÃ³n
# ===============================================
forms:
  field_recommendation_form:
    required_slots:
      - location
      - sport
      - time
      - date

# ===============================================
# RESPONSES - Respuestas del bot
# ===============================================
responses:
  # --- Saludos y despedidas ---
  utter_hello:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Estimado administrador, estoy listo para coordinar la operaciÃ³n de sus sedes. Â¿QuÃ© Ã¡rea desea revisar hoy o quÃ© reporte quiere ver?"
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Â¡Hola! Soy Chato Bot y estoy listo para ayudarte a encontrar la mejor cancha para tu partido."
    - text: "Â¡Habla! me llamo Chato, tu asistente virtual para coordinar pichangas. Â¿En quÃ© te ayudo?"
    - text: "Â¡Hola! AquÃ­ para ayudarte a encontrar la cancha ideal ğŸƒ"
    - text: "Â¡Saludos! Dime quÃ© necesitas y te consigo la mejor cancha ğŸ¯"
    - text: "Â¡Bienvenido! Estoy aquÃ­ para que encuentres donde jugar ğŸ€"

  utter_goodbye:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Ha sido un gusto asistirle con sus sedes. Si desea retomar la gestiÃ³n, estarÃ© atento a sus indicaciones."
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Â¡Perfecto! Que disfrutes tu partido. Cuando necesites otra reserva, aquÃ­ estarÃ©."
    - text: "Â¡Hasta luego! Vuelve cuando quieras coordinar una nueva cancha."

  utter_already_greeted:
    - text: "Ya nos saludamos ğŸ˜Š Â¿En quÃ© mÃ¡s puedo ayudarte?"
    - text: "Â¡Ya estamos conversando! Â¿QuÃ© necesitas?"

  # --- Ayuda ---
  utter_what_can_you_do:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: |
        Estoy aquÃ­ para apoyar con gestiÃ³n. Puedo:
        - Indicarle quiÃ©nes rentan frecuentemente sus espacios.
        - Traer informaciÃ³n de mÃ©tricas ocupaciÃ³n y alquiler.
        - Sugerir acciones para balancear ocupaciÃ³n y precios.
    - condition:
        - type: slot
          name: user_role
          value: player
      text: |
        Puedo ayudarte con todo lo necesario para tu juego:
        - Recomendarte canchas segÃºn barrio, horario y deporte.
        - Contarte cÃ³mo reservar, reprogramar o cancelar sin complicaciones.
        - Mostrarte tu historial de sugerencias y los comentarios que dejaste.
        - Avisarte sobre promos o detalles importantes de las sedes.
    - text: |
        Puedo darte una mano con:
        - Recomendarte canchas segÃºn el barrio, horario y deporte que buscas.
        - Contarte cÃ³mo reservar, reprogramar o cancelar sin complicaciones.
        - Mostrarte tu historial de sugerencias y los comentarios que dejaste.
        - Avisarte sobre promos o detalles importantes de las sedes.
        - Si eres administrador, puedo contarte quiÃ©nes rentan mÃ¡s frecuentemente tus espacios.
      metadata:
        rephrase: True

  utter_help:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Â¿NecesitÃ¡s que revise algo? Estoy para ayudarte con la gestiÃ³n."
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Â¿QuerÃ©s que siga buscando otra cancha, presupuesto o horario? Te acompaÃ±o en lo que necesites para armar el partido."
    - text: "Â¿Hay algo mÃ¡s en lo que pueda ayudarte?"
    - text: "Â¿Necesitas ayuda con algo mÃ¡s?"
    - text: "Â¿QuÃ© mÃ¡s puedo hacer por ti?"
    - text: "Estoy aquÃ­ para lo que necesites ğŸ˜Š"
    - text: "Â¿Alguna otra duda?"

  utter_admin_only_flow:
    - text: "Ese flujo estÃ¡ reservado para administradores. Si querÃ©s buscar cancha, avÃ­same que eres player o hacÃ© login desde una cuenta admin."
    - text: "Estoy en modo administrador y no puedo ejecutar recomendaciones de jugador para este perfil."

  utter_player_only_flow:
    - text: "Esa funcionalidad es exclusiva para administradores. Si necesitÃ¡s ayuda de player, decime quÃ© cancha querÃ©s y sigo ahÃ­."
    - text: "Para proteger la experiencia, los consejos de admins solo los reciben cuentas con rol admin, asÃ­ que sigo ayudando como player."

  utter_anything_else:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Â¿QuerÃ©s que revisemos otra cosa o coordinemos alguna operaciÃ³n adicional?"
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Â¿Te gustarÃ­a buscar otra cancha o necesitas algo mÃ¡s?"
    - text: "Â¿Hay algo mÃ¡s que pueda hacer por ti?"
    - text: "Â¿Necesitas ayuda con otra cosa?"
    - text: "Â¿Quieres que te ayude con algo mÃ¡s?"

  utter_can_help_more:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Â¿Desea que revise otro indicador o coordine una operaciÃ³n adicional?"
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Entiendo. Â¿Hay algo mÃ¡s en lo que pueda asistirte?"
    - text: "No hay problema. Â¿Puedo ayudarte con otra cosa?"
    - text: "EstÃ¡ bien. Â¿Necesitas informaciÃ³n sobre algo mÃ¡s?"

  # --- Preguntas del formulario ---
  utter_ask_location:
    - text: "Â¿En quÃ© distrito quieres jugar?"
      buttons:
        - title: "Villa El Salvador"
          payload: '/inform{"location":"Villa El Salvador"}'
        - title: "Chorrillos"
          payload: '/inform{"location":"Chorrillos"}'
        - title: "Surco"
          payload: '/inform{"location":"Surco"}'
        - title: "San Isidro"
          payload: '/inform{"location":"San Isidro"}'
    - text: "Â¿CuÃ¡l es tu zona preferida?"
      buttons:
        - title: "Villa El Salvador"
          payload: '/inform{"location":"Villa El Salvador"}'
        - title: "Chorrillos"
          payload: '/inform{"location":"Chorrillos"}'
        - title: "Surco"
          payload: '/inform{"location":"Surco"}'
        - title: "San Isidro"
          payload: '/inform{"location":"San Isidro"}'
        - title: "Otra zona"
          payload: '/inform{"location":"otra"}'
    - text: "Â¿Por quÃ© distrito te queda mejor?"
    - text: "Â¿DÃ³nde prefieres jugar?"
    - text: "IndÃ­came el distrito o zona donde buscas cancha"

  utter_ask_sport:
    - text: "Â¿QuÃ© deporte vas a practicar?"
      buttons:
        - title: "âš½ Fulbito"
          payload: '/inform{"sport":"football"}'
        - title: "ğŸ¾ Tenis"
          payload: '/inform{"sport":"tennis"}'
        - title: "ğŸ€ Basket"
          payload: '/inform{"sport":"basketball"}'
        - title: "ğŸ Voley"
          payload: '/inform{"sport":"voleyball"}'
    - text: "Â¿QuÃ© deporte quieres jugar?"
      buttons:
        - title: "âš½ FÃºtbol"
          payload: '/inform{"sport":"football"}'
        - title: "ğŸ¾ Tenis"
          payload: '/inform{"sport":"tennis"}'
        - title: "ğŸ€ Basket"
          payload: '/inform{"sport":"basketball"}'
        - title: "Otro"
          payload: '/inform{"sport":"otro"}'
    - text: "Â¿Para quÃ© deporte necesitas la cancha?"
    - text: "Dime quÃ© deporte van a practicar"

  utter_ask_time:
    - text: "Â¿A quÃ© hora quieres jugar? (ejemplo: 20:00)"
    - text: "Â¿QuÃ© horario prefieres? (formato 24h: 19:00)"
    - text: "Â¿A quÃ© hora te gustarÃ­a reservar?"
    - text: "IndÃ­came la hora aproximada (ejemplo: 18:00)"
    - text: "Â¿QuÃ© hora te viene bien? (ej: 20:30)"

  utter_ask_date:
    - text: "Â¿Para quÃ© dÃ­a necesitas la cancha? (ejemplo: 2025-11-20, 'hoy' o 'maÃ±ana')"

  utter_ask_budget:
    - text: "Â¿CuÃ¡l es tu presupuesto aproximado? (en soles)"
    - text: "Â¿Hasta cuÃ¡nto estÃ¡s dispuesto a pagar por hora?"
    - text: "Â¿Tienes un presupuesto en mente?"

  utter_ask_surface:
    - text: "Â¿QuÃ© tipo de superficie prefieres?"
      buttons:
        - title: "Grass sintÃ©tico"
          payload: '/inform{"surface":"grass sintÃ©tico"}'
        - title: "Grass natural"
          payload: '/inform{"surface":"grass natural"}'
        - title: "Losa de cemento"
          payload: '/inform{"surface":"losa de cemento"}'
        - title: "Me da igual"
          payload: "/affirm"

  # --- InformaciÃ³n ---
  utter_reservation_process:
    - text: |
        ğŸ“‹ Para reservar una cancha:

        1ï¸âƒ£ Dime tus preferencias (ubicaciÃ³n, deporte, horario)
        2ï¸âƒ£ Te mostrarÃ© las mejores opciones disponibles
        3ï¸âƒ£ Elige la que mÃ¡s te guste
        4ï¸âƒ£ Confirma tu reserva en la app

        Â¿Quieres que te ayude a buscar ahora?
    - text: |
        ğŸ¯ El proceso es sÃºper simple:

        â€¢ Me dices quÃ©, dÃ³nde y cuÃ¡ndo quieres jugar
        â€¢ Te muestro las opciones disponibles con precios
        â€¢ Seleccionas tu favorita
        â€¢ Confirmas en la app y listo!

        Â¿Empezamos?

  utter_modify_reservation:
    - text: |
        Para modificar una reserva existente:

        ğŸ“± Ingresa a la app de PichangApp
        ğŸ“‹ Ve a la secciÃ³n "Mis Reservas"
        âœï¸ Selecciona la reserva que quieres modificar
        ğŸ”„ Elige nueva fecha/hora segÃºn disponibilidad
        âœ… Consulta con el administrador de la cancha

        Nota: Las modificaciones estÃ¡n sujetas a disponibilidad y polÃ­ticas de cada cancha.
    - text: |
        ğŸ”„ Para cambiar tu reserva:

        1. Entra a la app
        2. Toca "Mis Reservas"
        3. Selecciona la que quieres cambiar
        4. Consulta con el administrador de la cancha

        âš ï¸ Hazlo con al menos 6 horas de anticipaciÃ³n.

  utter_cancellation_policy:
    - text: |
        ğŸ“œ PolÃ­tica de CancelaciÃ³n:

        âœ… CancelaciÃ³n gratuita: hasta 24h antes
        âš ï¸ Entre 24h-6h antes: cargo del 50%
        âŒ Menos de 6h antes: cargo del 100%

        ğŸ’¡ Para cancelar:
        â€¢ Ingresa a la app
        â€¢ Ve a "Mis Reservas"
        â€¢ Selecciona la reserva
        â€¢ Toca "Cancelar"

        El reembolso (si aplica) se procesa en 3-5 dÃ­as hÃ¡biles.
    - text: |
        ğŸš« Reglas de CancelaciÃ³n:

        ğŸ“… +24 horas antes â†’ 100% reembolso
        â° 6-24 horas antes â†’ 50% reembolso
        âš¡ -6 horas antes â†’ Sin reembolso

        Las cancelaciones se hacen desde "Mis Reservas" en la app.

  utter_pricing_info:
    - text: |
        ğŸ’° InformaciÃ³n de Precios:

        Los precios varÃ­an segÃºn:
        ğŸ“ UbicaciÃ³n (distrito)
        âš½ Tipo de cancha y deporte
        ğŸ• Horario (maÃ±ana, tarde, noche)
        ğŸ“… DÃ­a de la semana
        ğŸŸï¸ Instalaciones y servicios

        ğŸ’¡ Rango general:
        â€¢ Fulbito: S/50 - S/120 por hora
        â€¢ PÃ¡del: S/60 - S/150 por hora
        â€¢ Basket/Voley: S/40 - S/100 por hora

        Dime quÃ© buscas y te muestro opciones con precios exactos.
    - text: |
        ğŸ’µ Los precios dependen de varios factores:

        ğŸŒ† Zona (distritos premium son mÃ¡s caros)
        ğŸŒ™ Horario (noche suele ser mÃ¡s caro)
        ğŸ“† DÃ­a (fines de semana tienen tarifas especiales)
        â­ Calidad de instalaciones

        Â¿Quieres que busque opciones en tu presupuesto?

  utter_top_faqs:
    - text: |
        â“ Preguntas Frecuentes:

        â€¢ Â¿CÃ³mo reservo una cancha?
        â€¢ Â¿Puedo cancelar mi reserva?
        â€¢ Â¿CuÃ¡nto cuesta alquilar?
        â€¢ Â¿Hay descuentos o promociones?
        â€¢ Â¿QuÃ© mÃ©todos de pago aceptan?
        â€¢ Â¿Las canchas tienen estacionamiento?
        â€¢ Â¿Prestan balones o equipamiento?
        â€¢ Â¿Hay vestuarios y duchas?

        Â¿Sobre cuÃ¡l quieres saber mÃ¡s?
    - text: |
        ğŸ” Dudas Comunes:

        1. Proceso de reserva
        2. Formas de pago
        3. PolÃ­ticas de cancelaciÃ³n
        4. ModificaciÃ³n de reservas
        5. Precios y promociones
        6. Servicios incluidos

        PregÃºntame sobre cualquiera de estos temas.

  # --- Fallback ---
  utter_default_fallback:
    - text: "Disculpa, no entendÃ­ bien. Â¿PodrÃ­as reformularlo?"
    - text: "No estoy seguro de entender. Â¿Puedes explicarlo de otra forma?"
    - text: "Perdona, no captÃ© eso. Â¿PodrÃ­as decirlo diferente?"
    - text: "No entendÃ­ bien. Â¿Me lo puedes decir de otra manera?"
    - text: "Mmm, no comprendÃ­. Intenta con otras palabras por favor ğŸ¤”"

  utter_ask_rephrase:
    - text: "Lo siento, no captÃ© eso. Â¿PodrÃ­as decirlo de otra manera?"
    - text: "No entendÃ­ bien. Â¿Puedes reformular tu pregunta?"

  # --- Feedback ---
  utter_ask_for_feedback:
    - text: "Â¿QuÃ© te pareciÃ³ mi ayuda? CalifÃ­came del 1 al 5"
      buttons:
        - title: "1"
          payload: '/give_negative_feedback{"rating":"1"}}'
        - title: "2"
          payload: '/give_negative_feedback{"rating":"2"}}'
        - title: "3"
          payload: '/give_negative_feedback{"rating":"3"}}'
        - title: "4"
          payload: '/give_positive_feedback{"rating":"4"}}'
        - title: "5"
          payload: '/give_positive_feedback{"rating":"5"}}'
    - text: "Â¿Te fue Ãºtil mi ayuda? DÃ©jame una valoraciÃ³n â­"

  utter_thanks_for_feedback:
    - text: "Â¡Gracias por tu feedback! Me ayuda a mejorar ğŸ™"
    - text: "Â¡Muchas gracias por tu opiniÃ³n! La tengo en cuenta ğŸ˜Š"
    - text: "Â¡Gracias! Tu feedback es muy valioso â­"
    - text: "Â¡Genial! Gracias por tomarte el tiempo de calificarme ğŸ¯"

  utter_sorry_for_experience:
    - text: "Lamento no haber cumplido tus expectativas ğŸ˜” Â¿QuÃ© puedo mejorar?"
    - text: "Disculpa si no te ayudÃ© como esperabas. CuÃ©ntame quÃ© puedo hacer mejor."
    - text: "Lo siento mucho. Â¿Hay algo especÃ­fico que no funcionÃ³ bien?"

  # --- Confirmaciones y continuidad ---
  utter_are_you_still_there:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Â¿Sigues ahÃ­? Â¿Necesitas mÃ¡s tiempo o querÃ©s que vuelva a revisar las mÃ©tricas?"
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Â¿Sigues ahÃ­? Â¿Necesitas mÃ¡s tiempo?"
    - text: "Hola, Â¿continuamos con la bÃºsqueda?"
    - text: "Â¿Sigues buscando cancha?"

  # --- Mensajes informativos adicionales ---
  utter_processing:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Un momento, reviso las mejores mÃ©tricas... ğŸ”"
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Un momento, estoy buscando las mejores opciones... ğŸ”"
    - text: "DÃ©jame revisar las canchas disponibles... â³"
    - text: "Buscando canchas que coincidan con tus preferencias... ğŸ¯"

  utter_no_results:
    - text: "No encontrÃ© canchas con esos criterios. Â¿Quieres modificar algÃºn parÃ¡metro?"
    - text: "No hay disponibilidad para esa fecha/hora. Â¿Probamos con otra?"
    - text: "Hmm, no hay opciones disponibles. Â¿Cambiamos la ubicaciÃ³n o el horario?"

  utter_recommend_alternatives:
    - condition:
        - type: slot
          name: user_role
          value: admin
      text: "Â¿QuerÃ©s ver otras sedes o analizar horarios alternativos?"
    - condition:
        - type: slot
          name: user_role
          value: player
      text: "Â¿Te gustarÃ­a ver opciones en zonas cercanas?"
    - text: "Puedo mostrarte alternativas en horarios similares."
    - text: "Â¿QuÃ© tal si revisamos otras fechas disponibles?"

  utter_saved_preferences:
    - text: "He guardado tus preferencias para prÃ³ximas bÃºsquedas ğŸ’¾"
    - text: "Preferencias guardadas. La prÃ³xima vez serÃ¡ mÃ¡s rÃ¡pido âœ…"

  utter_welcome_back:
    - text: "Â¡Hola de nuevo! Â¿Buscamos cancha como la Ãºltima vez?"
    - text: "Â¡Bienvenido otra vez! Â¿Mismas preferencias que antes?"

  utter_first_time:
    - text: "Â¡Bienvenido a PichangApp! Es tu primera vez, dÃ©jame ayudarte ğŸ¯"
    - text: "Â¡Hola! Veo que es tu primera bÃºsqueda. Te guiarÃ© paso a paso ğŸ˜Š"

  # --- Mensajes para diferentes deportes ---
  utter_fulbito_tips:
    - text: "âš½ Tip: Las canchas de fulbito son mÃ¡s econÃ³micas entre semana y en horarios de maÃ±ana."

  utter_padel_tips:
    - text: "ğŸ¾ Tip: El pÃ¡del suele ser mÃ¡s caro pero muchas canchas ofrecen descuentos por reservas recurrentes."

  utter_basket_tips:
    - text: "ğŸ€ Tip: Algunas canchas de basket incluyen balones y vestuarios sin costo extra."

  utter_admin_menu:
    - text: |
        ğŸ“Š Panel de Administrador:

        â€¢ Ver clientes frecuentes
        â€¢ Alertas de demanda
        â€¢ Consejos de gestiÃ³n
        â€¢ AnÃ¡lisis de ocupaciÃ³n
        â€¢ Tendencias de reserva

        Â¿QuÃ© deseas consultar?

  # --- Validaciones y errores ---
  utter_invalid_time:
    - text: "Ese horario no parece vÃ¡lido. Usa formato 24h (ejemplo: 19:00)"
    - text: "Por favor ingresa una hora vÃ¡lida (00:00 a 23:59)"

  utter_invalid_date:
    - text: "Fecha no vÃ¡lida. Intenta con 'hoy', 'maÃ±ana' o formato DD/MM/YYYY"
    - text: "No reconozco esa fecha. Â¿Puedes probar con otro formato?"

  utter_invalid_budget:
    - text: "El presupuesto debe ser un nÃºmero positivo en soles"
    - text: "Por favor ingresa un presupuesto vÃ¡lido (ejemplo: 80)"

  utter_past_date:
    - text: "Esa fecha ya pasÃ³. Â¿Quieres una fecha futura?"
    - text: "No puedo reservar en el pasado ğŸ˜… Dame una fecha futura."

  # --- Promociones y ofertas ---
  utter_show_promotions:
    - text: |
        ğŸ‰ Promociones Activas:

        â€¢ Lunes a Viernes 10am-5pm: -20%
        â€¢ Reserva 3 canchas o mÃ¡s: -15%
        â€¢ Cliente nuevo: primera reserva -10%

        Â¿Te interesa alguna?

  utter_discount_applied:
    - text: "Â¡Genial! Aplicamos el descuento a tu bÃºsqueda ğŸ’°"

# ===============================================
# ACTIONS - Acciones personalizadas
# ===============================================
actions:
  # Acciones de sesiÃ³n
  - action_session_start
  - action_ensure_user_role
  - action_close_chat_session

  # Acciones de recomendaciÃ³n
  - action_log_field_recommendation_request
  - action_submit_field_recommendation_form
  - action_show_recommendation_history
  - action_log_urgent_request
  - action_reprogram_reservation

  # Acciones de administrador
  - action_provide_admin_management_tips
  - action_provide_admin_campus_top_clients
  - action_provide_admin_demand_alerts

  # Acciones de feedback
  - action_check_feedback_status
  - action_handle_feedback_rating

  # Acciones de formulario
  - validate_field_recommendation_form
  - action_deactivate_loop

  # Acciones de utilidad
  - action_default_fallback
  - action_reset_slots
  - action_check_inactivity
  - action_log_conversation_start
  - action_log_conversation_end
  - action_log_abandonment
  - action_log_user_intent

  # Acciones de validaciÃ³n
  - action_validate_time
  - action_validate_date
  - action_validate_budget

  # Acciones de personalizaciÃ³n
  - action_load_user_preferences
  - action_save_user_preferences
  - action_check_returning_user

# ===============================================
# SESSION CONFIG
# ===============================================
session_config:
  session_expiration_time: 60 # minutos
  carry_over_slots_to_new_session: true
