version: "3.1"

rules:
  - rule: inicializar sesión con metadata
    conversation_start: true
    steps:
      - action: action_session_start

  - rule: saludar al usuario
    steps:
      - intent: greet
      - action: utter_hello

  - rule: despedirse del usuario
    steps:
      - intent: goodbye
      - action: action_close_chat_session
      - action: utter_goodbye

  - rule: explicar capacidades
    steps:
      - intent: help
      - action: utter_what_can_you_do

  - rule: mostrar preguntas frecuentes
    steps:
      - intent: show_faqs
      - action: utter_top_faqs

  - rule: explicar proceso de reserva
    steps:
      - intent: ask_reservation_process
      - action: utter_reservation_process

  - rule: explicar cómo modificar reservas
    steps:
      - intent: ask_modify_reservation
      - action: utter_modify_reservation

  - rule: explicar políticas de cancelación
    steps:
      - intent: ask_cancellation_policy
      - action: utter_cancellation_policy

  - rule: informar precios
    steps:
      - intent: ask_pricing_info
      - action: utter_pricing_info

  - rule: iniciar formulario de recomendación
    steps:
      - intent: request_field_recommendation
      - action: field_recommendation_form
      - active_loop: field_recommendation_form

  - rule: enviar formulario de recomendación
    condition:
      - active_loop: field_recommendation_form
    steps:
      - action: field_recommendation_form
      - active_loop: null
      - action: action_submit_field_recommendation_form

  - rule: iniciar consulta de feedback
    steps:
      - intent: ask_feedback_status
      - action: action_check_feedback_status

  - rule: historial de recomendaciones
    steps:
      - intent: show_previous_recommendations
      - action: action_show_recommendation_history

